(this["webpackJsonpdva-boot-admin"]=this["webpackJsonpdva-boot-admin"]||[]).push([[28],{1584:function(e,t,a){},1929:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return x}));a(156);var n,r=a(80),o=a.n(r),c=(a(155),a(43)),l=a.n(c),s=a(7),i=a(8),d=a(12),u=a(11),p=a(13),h=(a(59),a(15)),f=a.n(h),m=a(0),y=a.n(m),v=a(58),g=a(791),S=a(804),E=a(973),C=a(5),N=a.n(C),b=(a(1584),f.a.Content),x=Object(v.c)((function(e){return{transferTree:e.transferTree,loading:e.loading.models.transferTree}}))(n=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLoadData=function(e){var t=a.props.transferTree.asyncDataSource;return new Promise((function(n){if(e.props.children)return n(),t;a.props.dispatch({type:"transferTree/@request",afterResponse:function(a){var r=a.data;return e.props.dataRef.children=r,n(),t},payload:{valueField:"asyncDataSource",url:"/tree/getAsyncData",data:e.props.eventKey}})}))},a.onAsyncSearch=function(e){return N.a.post("/tree/getAsyncSearchData",{search:e}).then((function(e){return e.data}))},a.onCustomLoadData=function(e){var t=a.props.transferTree.customAsyncDataSource;return new Promise((function(n){if(e.props.children)return n(),t;a.props.dispatch({type:"transferTree/@request",afterResponse:function(a){var r=a.data;return e.props.dataRef.children=r,n(),t},payload:{valueField:"customAsyncDataSource",url:"/tree/getCustomAsyncData",data:e.props.eventKey}})}))},a.onCustomChange=function(e,t,n){"OutOfMaxSize"===n&&a.notice.warn("\u6700\u591a\u53ea\u80fd\u9009\u62e92\u4eba\u54e6\uff01")},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.transferTree,t=e.dataSource,a=e.asyncDataSource,n=e.customAsyncDataSource,r=this.props.loading;return y.a.createElement(f.a,{className:"full-layout page transfer-tree-page"},y.a.createElement(b,null,y.a.createElement(o.a,{gutter:20},y.a.createElement(l.a,{span:12},y.a.createElement(S.a,{title:"\u6811\u578b\u7a7f\u7f29\u6846"},y.a.createElement(E.a,{dataSource:t,loading:r}))),y.a.createElement(l.a,{span:12},y.a.createElement(S.a,{title:"\u5f02\u6b65\u6811\u578b\u7a7f\u7f29\u6846"},y.a.createElement(E.a,{dataSource:a,loadData:this.onLoadData,asyncSearch:this.onAsyncSearch,loading:r,showSearch:!0})))),y.a.createElement(o.a,{gutter:20},y.a.createElement(l.a,{span:12},y.a.createElement(S.a,{title:"\u9ed8\u8ba4\u503c targetNodes"},y.a.createElement(E.a,{dataSource:t,loading:r,targetNodes:[{key:"341522",title:"\u970d\u90b1\u53bf"},{key:"340506",title:"\u535a\u671b\u533a"}],showSearch:!0}))),y.a.createElement(l.a,{span:12},y.a.createElement(S.a,{title:"MAX & ICON"},y.a.createElement(E.a,{className:"my-theme",titleText:"\u7ec4\u7ec7\u67b6\u6784",dataSource:n,loadData:this.onCustomLoadData,asyncSearch:this.onAsyncSearch,loading:r,max:2,onChange:this.onCustomChange,treeRender:function(e){return"undefined"!==typeof e.gender?y.a.createElement("span",{className:"flex",style:{alignItems:"center"}},y.a.createElement("span",{className:e.gender?"man":"woman"}),y.a.createElement("span",null,e.title)):e.title},listRender:function(e){return y.a.createElement("div",{className:"flex"},y.a.createElement("span",{className:e.gender?"man":"woman"}),y.a.createElement("span",null,e.title))}}))))))}}]),t}(g.a))||n},791:function(e,t,a){"use strict";a(786);var n=a(787),r=a.n(n),o=a(7),c=a(8),l=a(12),s=a(11),i=a(13),d=a(0),u=a.n(d),p=a(5),h=a.n(p),f=a(33),m=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).notice=f.a.notice,a.onAdd=function(){a.setState({record:null,visible:!0})},a.onUpdate=function(e){a.setState({record:e,visible:!0})},a.onDelete=function(e){if(e&&(!h.a.isArray(e)||e.length)){var t="\u60a8\u662f\u5426\u8981\u5220\u9664\u8fd9".concat(h.a.isArray(e)?e.length:"","\u9879\uff1f");r.a.confirm({title:"\u6ce8\u610f",content:t,onOk:function(){a.handleDelete(h.a.isArray(e)?e:[e])},onCancel:function(){}})}},a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"handleAdd",value:function(){}},{key:"handleUpdate",value:function(){}},{key:"handleDelete",value:function(e){}},{key:"history",get:function(){return this.props.history}}]),t}(u.a.Component);t.a=m},802:function(e,t,a){},804:function(e,t,a){"use strict";a(812);var n=a(813),r=a.n(n),o=a(24),c=a(7),l=a(8),s=a(12),i=a(11),d=a(13),u=(a(786),a(787)),p=a.n(u),h=a(0),f=a.n(h),m=a(9),y=a(3),v=a.n(y),g=a(54),S=a(88),E=a.n(S),C=(a(802),p.a.confirm),N=function(e){},b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).onExpand=function(e){return function(t){var n=a.props.onChange;a.setState({expand:e,collapse:!1}),n&&n({expand:e,collapse:!1})}},a.onCollapse=function(e){return function(t){var n=a.props.onChange;a.setState({collapse:e,expand:!1}),n&&n({collapse:e,expand:!1})}},a.onRefresh=function(){a.setState({refresh:a.state.refresh+1,animationName:"fadeIn"}),a.props.onRefresh&&a.props.onRefresh()},a.onClose=function(){a.state.expand?C({title:"\u63d0\u793a",content:"\u60a8\u786e\u8ba4\u8981\u5173\u95ed\u8fd9\u4e2a\u9762\u677f\uff1f",onOk:function(){a.props.onClose&&a.props.onClose()}}):a.props.onClose&&a.props.onClose()},a.state={collapse:e.collapse||!1,expand:e.expand||!1,refresh:0,animationName:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.expand,n=t.collapse,c=t.refresh,l=t.animationName,s=this.props,i=s.theme,d=s.prefix,u=s.className,p=s.title,h=s.width,y=s.height,S=s.style,E=s.children,C=s.header,b=s.cover,x=s.scroll,O=v()(d,u,{theme:!!i,"panel-fullscreen":!!a,"panel-collapsed":!!n,cover:!!b}),j=Object(o.a)({},S,{width:h}),K={};a||(K.height=y),x&&(K.overflow="auto");var D="undefined"===typeof C?f.a.createElement("div",{className:"".concat(d,"-header")},f.a.createElement("span",{className:"".concat(d,"-header-title")},p),f.a.createElement("span",{className:"".concat(d,"-header-controls")},f.a.createElement("a",{className:"panel-control-loader",onClick:this.onRefresh},f.a.createElement(m.a,{type:"refresh"})),f.a.createElement("a",{className:"panel-control-fullscreen",onClick:this.onExpand(!a)},f.a.createElement(m.a,{type:"".concat(a?"shrink":"enlarge")})),f.a.createElement("a",{className:"panel-control-collapsed",onClick:this.onCollapse(!n)},f.a.createElement(m.a,{type:"".concat(n?"plus":"minus")})),f.a.createElement(r.a,{title:"\u60a8\u786e\u8ba4\u8981\u5173\u95ed\u8fd9\u4e2a\u9762\u677f\uff1f",onConfirm:this.onClose,placement:"topRight"},f.a.createElement("a",{className:"panel-control-remove",onClick:a?this.onClose:N},f.a.createElement(m.a,{type:"close"}))))):C;return f.a.createElement("div",{className:O,style:j},D,f.a.createElement("div",{className:"".concat(d,"-body"),style:K},f.a.createElement(g.a,{className:"panel-content",type:l,callback:function(t){return e.setState({animationName:""})},key:c},E)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"collapse"in e&&!E()(e.collapse,t.collapse)?{collapse:!!e.collapse}:"expand"in e&&!E()(e.expand,t.expand)?{expand:!!e.expand}:null}}]),t}(h.Component);b.defaultProps={prefix:"antui-panel"};var x=b;t.a=x},971:function(e,t,a){},973:function(e,t,a){"use strict";var n=a(27),r=a(7),o=a(8),c=a(12),l=a(11),s=a(13),i=a(0),d=a.n(i),u=a(353),p=a(3),h=a.n(p),f=a(88),m=a.n(f);var y=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={dataSource:[]},a.handleDeleteItem=function(e,t){e.preventDefault(),e.stopPropagation(),a.props.onDeleteItem(t||a.state.dataSource)},a.renderItem=function(e,t){var n=a.props,r=n.render,o=n.titleKey,c=n.rowKey,l=a.state.dataSource[e];return d.a.createElement("li",{className:"list-comp-item","data-key":l[c],title:l[o],key:l[c]},d.a.createElement("span",{className:"list-comp-item-body"},r?r(l):l.title),d.a.createElement("a",{className:"list-comp-clear-item",onClick:function(e){return a.handleDeleteItem(e,[l])}},d.a.createElement(u.a,null)))},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.prefixCls,r=t.notFoundContent,o=t.style,c=t.max,l=h()(Object(n.a)({},a,!0));return d.a.createElement("div",{className:l,style:o},d.a.createElement("div",{className:"".concat(a,"-header")},d.a.createElement("span",{className:"".concat(a,"-header-selected")},d.a.createElement("span",null,this.state.dataSource.length," ",c?" / ".concat(c):""," ","\u6761"),d.a.createElement("span",{className:"".concat(a,"-header-title")},d.a.createElement("a",{className:"".concat(a,"-clear-all"),onClick:function(t){return e.handleDeleteItem(t)}},"\u6e05\u7a7a\u5217\u8868")))),d.a.createElement("div",{className:"".concat(a,"-body")},d.a.createElement("div",{className:"".concat(a,"-body-content")},!!this.state.dataSource.length||d.a.createElement("div",{className:"".concat(a,"-body-content-not-found")},r||"\u5217\u8868\u4e3a\u7a7a"),this.state.dataSource.map((function(t,a){return e.renderItem(a,t[e.props.rowKey])})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return m()(e.dataSource,t.dataSource)?null:{dataSource:e.dataSource}}}]),t}(d.a.Component);y.defaultProps={prefixCls:"antui-transfer-tree-list",dataSource:[],rowKey:"key",onDeleteItem:function(){}};a(906);var v=a(907),g=a.n(v),S=a(132),E=(a(927),a(928)),C=a.n(E),N=a(24),b=(a(793),a(795)),x=a.n(b),O=a(352),j=a(366),K=a(5),D=a.n(K),T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={value:""},a.handleChange=function(e){a.props.onChange&&a.onChange(e),a.setState({value:e})},a.handleClear=function(e){e.preventDefault();var t=a.props.handleClear;t&&t(e),a.setState({value:""})},a.onChange=D.a.debounce(e.onChange,500),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.placeholder,n=t.prefixCls,r=this.state.value&&this.state.value.length>0?d.a.createElement("a",{className:"".concat(n,"-action"),onClick:this.handleClear},d.a.createElement(O.a,null)):d.a.createElement("span",{className:"".concat(n,"-action")},d.a.createElement(j.a,null));return d.a.createElement("div",null,d.a.createElement(x.a,{placeholder:a,className:n,value:this.state.value,ref:"input",onChange:function(t){return e.handleChange(t.target.value)}}),r)}}]),t}(d.a.PureComponent);function k(){}T.defaultProps={placeholder:""};var F=function(e){function t(){var e,a;Object(r.a)(this,t);for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={expandedKeys:[],autoExpandParent:!0,searchList:[]},a.handleFilter=function(e){a.renderFilterResult(e),a.props.handleFilter(e)},a.handleClear=function(){a.renderFilterResult(""),a.props.handleFilter("")},a.renderTreeNodes=function(e){var t=a.props,n=t.treeKey,r=t.treeTitleKey,o=t.render;return e.map((function(e){var t=Object(N.a)({},e,{key:e[n],title:o?o(e):e[r],dataRef:e});return e.children?d.a.createElement(C.a.TreeNode,t,a.renderTreeNodes(e.children)):d.a.createElement(C.a.TreeNode,t)}))},a.renderFilterResult=function(e){var t=a.props,n=t.flatTreeData,r=t.treeTitleKey,o=t.asyncSearch;if(o){var c=o(e);c.then&&c.then((function(e){a.setState({searchList:e})}))}else a.setState({searchList:n.filter((function(t){return t[r].indexOf(e)>=0}))})},a.renderSearchItem=function(e){var t=a.props.render;return e.map((function(e,n){return d.a.createElement("li",{className:"list-comp-item",title:e[a.props.treeTitleKey],key:e[a.props.treeKey],onClick:function(){return a.handleSelect(Object(N.a)({},e,{dataRef:e}))}},d.a.createElement("span",{className:"list-comp-item-body"},t?t(e):e[a.props.treeTitleKey]))}))},a.handleSelect=function(e){var t=a.props,n=t.selectedKeys,r=t.selectedNodes,o=t.treeKey,c=r?Object(S.a)(r):[];n&&n.some((function(t){return t===e[o]}))?c=c.filter((function(t){return t[o]!==e[o]})):c.push(e),a.props.onTreeSelected(c)},a.onSelect=function(e,t){var r=a.props,o=r.selectedNodes,c=r.selectedKeys,l=r.loadData,s=r.onTreeSelected,i=r.treeKey,d=r.treeTitleKey;if(t.selected&&t.node.props.dataRef){if(l&&!t.node.props.dataRef.isLeaf)return;if(t.node.props.dataRef.children&&t.node.props.dataRef.children.length)return void a.onExpand([t.node.props.eventKey],t)}var u=t.selectedNodes.map((function(e){var t;return Object(N.a)((t={},Object(n.a)(t,i,e[i]),Object(n.a)(t,d,e[d]),t),e.dataRef)}));if(l){var p=o?Object(S.a)(o):[];t.selected||(p=p.filter((function(e){return e[i]!==t.node.props.eventKey}))),s(c?p.concat(u.filter((function(e){return c.indexOf(e[i])<0}))):u)}else s(u)},a.onExpand=function(e,t){if(t.event&&t.node.props.children){var n=[e,a.state.expandedKeys].reduce((function(e,t){return e.filter((function(e){return-1===t.indexOf(e)})).concat(t)}));a.state.expandedKeys.some((function(e){return e===t.node.props.eventKey}))&&(n=n.filter((function(e){return e!==t.node.props.eventKey}))),a.setState({expandedKeys:n,autoExpandParent:!1})}else a.setState({expandedKeys:e,autoExpandParent:!1})},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.loading,n=e.treeData,r=e.titleText,o=e.loadData,c=e.filter,l=e.showSearch,s=e.style,i=e.selectedKeys,u=this.state,p=u.expandedKeys,h=u.autoExpandParent,f=u.searchList,m=this.props,y=m.searchPlaceholder,v=m.notFoundContent,S=d.a.createElement(C.a,{loadData:o,onSelect:this.onSelect,onExpand:this.onExpand,selectedKeys:i||[],expandedKeys:p,autoExpandParent:h,multiple:!0},this.renderTreeNodes(n));return d.a.createElement("div",{className:t,style:s},d.a.createElement("div",{className:"".concat(t,"-header tree-title")},r),d.a.createElement("div",{className:l?"".concat(t,"-body ").concat(t,"-body-with-search"):"".concat(t,"-body")},l?d.a.createElement("div",{className:"".concat(t,"-body-search-wrapper")},d.a.createElement(T,{prefixCls:"".concat(t,"-search"),onChange:this.handleFilter,handleClear:this.handleClear,placeholder:y||"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9"})):null,d.a.createElement("div",{className:"".concat(t,"-body-content tree-content")},c?d.a.createElement("ul",{className:"tree-filter-result"},this.renderSearchItem(f)):null,n.length?S:d.a.createElement("div",{className:"".concat(t,"-body-content-not-found")},a?d.a.createElement(g.a,{spinning:a}):v||"\u5217\u8868\u4e3a\u7a7a"))))}}]),t}(d.a.Component);F.defaultProps={dataSource:[],titleText:"",treeKey:"key",treeTitleKey:"title",showSearch:!1,handleClear:k,handleFilter:k,handleSelect:k,handleSelectAll:k};var w=a(364);a(971);function R(){}var A=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).handleFilter=function(e,t){a.setState(Object(n.a)({},"".concat(e,"Filter"),t))},a.handleLeftFilter=function(e){return a.handleFilter("left",e)},a.handleRightFilter=function(e){return a.handleFilter("right",e)},a.handleClear=function(e){a.setState(Object(n.a)({},"".concat(e,"Filter"),""))},a.handleRightClear=function(){return a.handleClear("right")},a.handleDeleteItem=function(e){var t=a.props.treeKey,n=a.state.targetNodes.filter((function(a){return!e.some((function(e){return e[t]===a[t]}))})),r=n.map((function(e){return e[t]}));a.setState({selectedKeys:r,targetNodes:n}),a.props.onChange&&a.props.onChange(r,n)},a.onTreeSelected=function(e){var t=a.props,n=t.treeKey,r=t.max;if(r&&e.length>r){console.error("error, selected number > max");var o=a.state,c=o.targetKeys,l=o.targetNodes;a.props.onChange&&a.props.onChange(c,l,"OutOfMaxSize")}else{var s=e.map((function(e){return e[n]}));a.setState({selectedKeys:s,targetNodes:e}),a.props.onChange&&a.props.onChange(s,e)}},a.state={leftFilter:"",rightFilter:"",dataSource:e.dataSource,targetNodes:e.targetNodes,selectedKeys:e.targetNodes?e.targetNodes.map((function(t){return t[e.treeKey]})):null},e.showSearch&&(a.flatTreeData=a.getFlatTreeData(e.dataSource)),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"getFlatTreeData",value:function(e){var t=this,a=[];return e.forEach((function(e){e.children?a=a.concat(t.getFlatTreeData(e.children)):a.push(e)})),a}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.props.targetNodes===e.targetNodes&&this.props.dataSource===e.dataSource||(this.props.targetNodes&&this.setState({targetNodes:this.props.targetNodes,selectedKeys:this.props.targetNodes.map((function(e){return e[a.props.treeKey]}))}),this.props.dataSource&&this.setState({dataSource:this.props.dataSource}),this.props.showSearch&&(this.flatTreeData=this.getFlatTreeData(this.props.dataSource)))}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,r=t.titleText,o=t.showSearch,c=t.notFoundContent,l=t.treeKey,s=t.treeTitleKey,i=t.searchPlaceholder,u=t.footer,p=t.listStyle,f=t.className,m=t.listRender,v=t.treeRender,g=t.loadData,S=t.loading,E=t.asyncSearch,C=t.max,N=this.state,b=N.leftFilter,x=N.rightFilter,O=N.selectedKeys,j=N.targetNodes,K=N.dataSource,D=h()((e={},Object(n.a)(e,f,!!f),Object(n.a)(e,a,!0),e));return d.a.createElement("div",{className:D},d.a.createElement(F,{titleText:r,loadData:g,asyncSearch:E,treeData:K,flatTreeData:this.flatTreeData,selectedKeys:O,selectedNodes:j,treeKey:l,treeTitleKey:s,render:v,style:p,filter:b,handleFilter:this.handleLeftFilter,onTreeSelected:this.onTreeSelected,showSearch:o,searchPlaceholder:i,notFoundContent:c,footer:u,prefixCls:"".concat(a,"-list"),loading:S}),d.a.createElement("div",{className:"".concat(a,"-operation")},d.a.createElement(w.a,null)),d.a.createElement(y,{filter:x,dataSource:j,style:p,onDeleteItem:this.handleDeleteItem,render:m,notFoundContent:c,prefixCls:"".concat(a,"-list"),max:C}))}}]),t}(d.a.Component);A.defaultProps={prefixCls:"antui-transfer-tree",dataSource:[],onChange:R,titleText:"\u6e90\u5217\u8868",treeKey:"key",treeTitleKey:"title",showSearch:!1,footer:R,loading:!1};t.a=A}}]);
//# sourceMappingURL=28.a92cd7d3.chunk.js.map